<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Démonstration de POST</title>

<script src="ajax.js" type="text/javascript"></script>
<script language="JavaScript">

	function Write(url, content)	// url is the script and data is a string of parameters
	{ 
		var xhr = createXHR();

		xhr.onreadystatechange=function()
		{ 
			if(xhr.readyState == 4)
			{
				//alert("Envoyé " + content);
			}
		}; 
		xhr.open("POST", url, true);		
		xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
		xhr.send(content); 
	} 


	function submitForm()
	{ 
		var content = document.ajax.sentence.value;
		Write("ajax-post-text.php", "file=ajax-post-text.txt&content=" + content);
		var storing = document.getElementById("storage");
		storing.innerHTML = "<p>Maintenant vous pouvez voir ce que vous avez envoyé dans le fichier, <b><a href='ajax-post-text.txt' target='_parent'>ajax-post-text.txt</a></b>. ";
	} 

</script>

</head>

	
<body bgcolor="#FFFFFF">
<h1>Démonstration de POST</h1>
<p>Enregistrer un texte dans un fichier. Voir le code JavaScript dans le source et le fichier 
  <a href="ajax.js" target="_parent">ajax.js</a>.</p>

<p> La démonstration utilise un petit    <a href="ajax-post-text-php.txt" target="_parent">script PHP</a> pour recevoir les données et les enregistrer dans un fichier. </p>
<p> Taper un texte dans le champ ci-dessous et cliquez sur le bouton &quot;Envoyer&quot;, et le texte sera envoyé au serveur.<br>
Vous pouvez alors retrouver votre texte en cliquant sur le lien qui apparaît sous le formulaire.</p>
<p>Pour une question de sécurité, le nom du fichier est prédéfini et vérifié par le serveur. </p>
<FORM name="ajax" method="POST" action="">
  <p>
    <input type="text" name="sentence" value="Je crois qu'il n'est jamais possible de prouver quoi que ce soit. Mais je ne peux pas le prouver" size="80">
    <INPUT type="button" value="Envoi"  ONCLICK="submitForm()">
  </p>
</FORM>

<div id="storage"> Rien pour le moment. </div>	


<p>&copy;<a href="http://www.xul.fr" target="_parent"> xul.fr</a></p>
</body>
</html>
